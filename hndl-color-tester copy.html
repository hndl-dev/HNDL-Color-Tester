<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HNDL Color Palette Tester</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #083359;
    --neutral: #f5f5f5;
    --current-accent: #a6ed0c;
    --surface: #0a0e1a;
    --surface-light: #111827;
    --text: #e2e8f0;
    --text-muted: #94a3b8;
    --border: #1e293b;
  }

  body.light-mode {
    --surface: #ffffff;
    --surface-light: #f3f4f6;
    --text: #1e293b;
    --text-muted: #64748b;
    --border: #e2e8f0;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Plus Jakarta Sans', sans-serif;
    background: var(--surface);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  .grain {
    position: fixed;
    inset: 0;
    opacity: 0.03;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    z-index: 9999;
  }

  header {
    padding: 2.5rem 3rem 1.5rem;
    border-bottom: 1px solid var(--border);
  }

  header h1 {
    font-size: 1.5rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    margin-bottom: 0.25rem;
  }

  header p {
    color: var(--text-muted);
    font-size: 0.875rem;
    font-family: 'DM Sans', sans-serif;
  }

  .layout {
    display: grid;
    grid-template-columns: 320px 1fr;
    min-height: calc(100vh - 90px);
  }

  /* Sidebar */
  .sidebar {
    border-right: 1px solid var(--border);
    padding: 1.5rem;
    overflow-y: auto;
    max-height: calc(100vh - 90px);
  }

  .sidebar h2 {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--text-muted);
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .color-group {
    margin-bottom: 1.5rem;
  }

  .color-group-label {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
    font-weight: 500;
    opacity: 0.7;
  }

  .color-option {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.6rem 0.75rem;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 2px solid transparent;
    margin-bottom: 0.25rem;
  }

  .color-option:hover {
    background: rgba(255,255,255,0.04);
  }

  .color-option.active {
    background: rgba(255,255,255,0.06);
    border-color: var(--current-accent);
  }

  .color-swatch {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  .color-info {
    flex: 1;
    min-width: 0;
  }

  .color-name {
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: 1px;
  }

  .color-hex {
    font-size: 0.7rem;
    color: var(--text-muted);
    font-family: 'DM Sans', monospace;
  }

  /* Custom color input */
  .custom-section {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
  }

  .custom-input-row {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  .custom-input-row input[type="color"] {
    width: 40px;
    height: 36px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: none;
    padding: 0;
  }

  .custom-input-row input[type="color"]::-webkit-color-swatch-wrapper { padding: 2px; }
  .custom-input-row input[type="color"]::-webkit-color-swatch { border-radius: 6px; border: none; }

  .custom-input-row input[type="text"] {
    flex: 1;
    background: var(--surface-light);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 0.5rem 0.75rem;
    border-radius: 8px;
    font-family: 'DM Sans', monospace;
    font-size: 0.8rem;
    outline: none;
    transition: border-color 0.2s;
  }

  .custom-input-row input[type="text"]:focus {
    border-color: var(--current-accent);
  }

  .custom-input-row button {
    background: var(--current-accent);
    color: var(--navy);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 700;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .custom-input-row button:hover { opacity: 0.85; }

  /* Main preview area */
  .preview-area {
    padding: 2.5rem;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    overflow-y: auto;
    max-height: calc(100vh - 90px);
  }

  /* Logo preview */
  .logo-preview-card {
    background: var(--navy);
    border-radius: 20px;
    padding: 3rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    box-shadow: 0 20px 60px rgba(0,0,0,0.4);
    position: relative;
    overflow: hidden;
  }

  .logo-preview-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at 30% 50%, rgba(255,255,255,0.03) 0%, transparent 70%);
  }

  .logo-text {
    font-size: 5rem;
    font-weight: 800;
    letter-spacing: -0.03em;
    color: var(--current-accent);
    position: relative;
    z-index: 1;
    line-height: 1;
    transition: color 0.4s ease;
  }

  .logo-badge {
    position: relative;
    z-index: 1;
    width: 110px;
    height: 90px;
    border: 3px solid rgba(255,255,255,0.2);
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  .logo-badge span {
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--current-accent);
    letter-spacing: 0.08em;
    text-align: center;
    line-height: 1.3;
    transition: color 0.4s ease;
  }

  /* Preview cards grid */
  .preview-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.25rem;
  }

  .preview-card {
    border-radius: 16px;
    padding: 1.75rem;
    position: relative;
    overflow: hidden;
  }

  .preview-card h3 {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
    opacity: 0.6;
    font-weight: 600;
  }

  /* Card: On Navy */
  .card-on-navy {
    background: var(--navy);
  }

  .card-on-navy .sample-text {
    color: var(--current-accent);
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    transition: color 0.4s ease;
  }

  .card-on-navy .sample-body {
    color: rgba(255,255,255,0.6);
    font-size: 0.8rem;
    line-height: 1.6;
    font-family: 'DM Sans', sans-serif;
  }

  .card-on-navy h3 { color: rgba(255,255,255,0.4); }

  /* Card: On White */
  .card-on-white {
    background: var(--neutral);
  }

  .card-on-white .sample-text {
    color: var(--current-accent);
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    transition: color 0.4s ease;
  }

  .card-on-white .sample-body {
    color: rgba(0,0,0,0.5);
    font-size: 0.8rem;
    line-height: 1.6;
    font-family: 'DM Sans', sans-serif;
  }

  .card-on-white h3 { color: rgba(0,0,0,0.35); }

  /* Card: Button styles */
  .card-buttons {
    background: var(--surface-light);
    border: 1px solid var(--border);
  }

  .card-buttons h3 { color: var(--text-muted); }

  .btn-row {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }

  .btn-sample {
    padding: 0.65rem 1.25rem;
    border-radius: 10px;
    font-size: 0.8rem;
    font-weight: 600;
    border: none;
    cursor: pointer;
    text-align: center;
    transition: all 0.4s ease;
  }

  .btn-filled {
    background: var(--current-accent);
    color: var(--navy);
  }

  .btn-outline {
    background: transparent;
    border: 2px solid var(--current-accent);
    color: var(--current-accent);
  }

  .btn-ghost {
    background: rgba(166, 237, 12, 0.1);
    color: var(--current-accent);
  }

  /* Card: Dashboard mock */
  .card-dashboard {
    background: var(--surface-light);
    border: 1px solid var(--border);
  }

  .card-dashboard h3 { color: var(--text-muted); }

  .dash-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
  }

  .dash-stat {
    background: rgba(255,255,255,0.03);
    border-radius: 10px;
    padding: 0.85rem;
    border: 1px solid var(--border);
  }

  .dash-stat-label {
    font-size: 0.6rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.35rem;
  }

  .dash-stat-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--current-accent);
    transition: color 0.4s ease;
  }

  .dash-bar-chart {
    margin-top: 0.75rem;
    display: flex;
    align-items: flex-end;
    gap: 4px;
    height: 50px;
  }

  .dash-bar {
    flex: 1;
    border-radius: 3px 3px 0 0;
    background: var(--current-accent);
    transition: background 0.4s ease, height 0.3s ease;
    opacity: 0.7;
  }

  .dash-bar:nth-child(odd) { opacity: 0.4; }

  /* Contrast info */
  .contrast-section {
    background: var(--surface-light);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem 1.75rem;
  }

  .contrast-section h3 {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .contrast-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }

  .contrast-item {
    text-align: center;
  }

  .contrast-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-bottom: 0.35rem;
    font-family: 'DM Sans', sans-serif;
  }

  .contrast-ratio {
    font-size: 1.4rem;
    font-weight: 700;
  }

  .contrast-badge {
    display: inline-block;
    font-size: 0.6rem;
    font-weight: 700;
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    margin-top: 0.25rem;
    letter-spacing: 0.05em;
  }

  .badge-pass { background: rgba(34,197,94,0.15); color: #22c55e; }
  .badge-fail { background: rgba(239,68,68,0.15); color: #ef4444; }

  /* Color comparison strip */
  .comparison-strip {
    display: flex;
    gap: 0.75rem;
    padding: 1.25rem;
    background: var(--surface-light);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow-x: auto;
  }

  .strip-swatch {
    flex: 1;
    min-width: 60px;
    aspect-ratio: 1;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.25s ease;
    position: relative;
    border: 2px solid transparent;
  }

  .strip-swatch:hover { transform: scale(1.08); }
  .strip-swatch.active-strip {
    border-color: white;
    box-shadow: 0 0 20px rgba(255,255,255,0.15);
    transform: scale(1.08);
  }

  .strip-swatch-label {
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.55rem;
    color: var(--text-muted);
    white-space: nowrap;
    font-weight: 500;
  }

  .strip-wrapper {
    padding-bottom: 1.5rem;
  }

  /* Light mode overrides for hardcoded colors */
  body.light-mode .grain { opacity: 0.015; }

  body.light-mode .color-option:hover {
    background: rgba(0,0,0,0.04);
  }

  body.light-mode .color-option.active {
    background: rgba(0,0,0,0.06);
  }

  body.light-mode .color-swatch {
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
  }

  body.light-mode .card-on-navy .sample-body {
    color: rgba(255,255,255,0.6);
  }

  body.light-mode .card-on-navy h3 { color: rgba(255,255,255,0.4); }

  body.light-mode .dash-stat {
    background: rgba(0,0,0,0.03);
  }

  body.light-mode .strip-swatch.active-strip {
    border-color: var(--navy);
    box-shadow: 0 0 20px rgba(0,0,0,0.15);
  }

  body.light-mode .logo-preview-card {
    box-shadow: 0 20px 60px rgba(0,0,0,0.12);
  }

  /* Mode toggle */
  .mode-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--surface-light);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 0.35rem 0.75rem;
    cursor: pointer;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--text);
    transition: all 0.3s ease;
    user-select: none;
  }

  .mode-toggle:hover {
    border-color: var(--current-accent);
  }

  .mode-toggle-icon {
    font-size: 1rem;
    line-height: 1;
  }

  .header-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  @media (max-width: 900px) {
    .layout { grid-template-columns: 1fr; }
    .sidebar {
      max-height: none;
      border-right: none;
      border-bottom: 1px solid var(--border);
    }
    .preview-area { max-height: none; }
    .preview-grid { grid-template-columns: 1fr; }
    .logo-text { font-size: 3.5rem; }
  }
</style>
</head>
<body>
<div class="grain"></div>

<header>
  <div class="header-row">
    <div>
      <h1>HNDL Color Palette Tester</h1>
      <p>Explore accent color alternatives against your navy brand</p>
    </div>
    <button class="mode-toggle" onclick="toggleMode()">
      <span class="mode-toggle-icon" id="modeIcon">&#9790;</span>
      <span id="modeLabel">Dark</span>
    </button>
  </div>
</header>

<div class="layout">
  <aside class="sidebar">
    <h2>Accent Colors</h2>

    <div class="color-group">
      <div class="color-group-label">Current</div>
      <div class="color-option active" data-color="#a6ed0c" data-name="Go Green (Current)" onclick="setColor(this)">
        <div class="color-swatch" style="background:#a6ed0c"></div>
        <div class="color-info">
          <div class="color-name">Go Green (Current)</div>
          <div class="color-hex">#a6ed0c</div>
        </div>
      </div>
    </div>

    <div class="color-group">
      <div class="color-group-label">Green Family</div>
      <div class="color-option" data-color="#50C878" data-name="Emerald" onclick="setColor(this)">
        <div class="color-swatch" style="background:#50C878"></div>
        <div class="color-info">
          <div class="color-name">Emerald</div>
          <div class="color-hex">#50C878</div>
        </div>
      </div>
      <div class="color-option" data-color="#3EB489" data-name="Mint / Seafoam" onclick="setColor(this)">
        <div class="color-swatch" style="background:#3EB489"></div>
        <div class="color-info">
          <div class="color-name">Mint / Seafoam</div>
          <div class="color-hex">#3EB489</div>
        </div>
      </div>
      <div class="color-option" data-color="#00BFA5" data-name="Teal Green" onclick="setColor(this)">
        <div class="color-swatch" style="background:#00BFA5"></div>
        <div class="color-info">
          <div class="color-name">Teal Green</div>
          <div class="color-hex">#00BFA5</div>
        </div>
      </div>
      <div class="color-option" data-color="#4CAF50" data-name="Material Green" onclick="setColor(this)">
        <div class="color-swatch" style="background:#4CAF50"></div>
        <div class="color-info">
          <div class="color-name">Material Green</div>
          <div class="color-hex">#4CAF50</div>
        </div>
      </div>
    </div>

    <div class="color-group">
      <div class="color-group-label">Blue-Green</div>
      <div class="color-option" data-color="#00D4FF" data-name="Electric Cyan" onclick="setColor(this)">
        <div class="color-swatch" style="background:#00D4FF"></div>
        <div class="color-info">
          <div class="color-name">Electric Cyan</div>
          <div class="color-hex">#00D4FF</div>
        </div>
      </div>
      <div class="color-option" data-color="#40E0D0" data-name="Turquoise" onclick="setColor(this)">
        <div class="color-swatch" style="background:#40E0D0"></div>
        <div class="color-info">
          <div class="color-name">Turquoise</div>
          <div class="color-hex">#40E0D0</div>
        </div>
      </div>
    </div>

    <div class="color-group">
      <div class="color-group-label">Warm Alternatives</div>
      <div class="color-option" data-color="#FFB800" data-name="Amber Gold" onclick="setColor(this)">
        <div class="color-swatch" style="background:#FFB800"></div>
        <div class="color-info">
          <div class="color-name">Amber Gold</div>
          <div class="color-hex">#FFB800</div>
        </div>
      </div>
      <div class="color-option" data-color="#FF6B4A" data-name="Coral Orange" onclick="setColor(this)">
        <div class="color-swatch" style="background:#FF6B4A"></div>
        <div class="color-info">
          <div class="color-name">Coral Orange</div>
          <div class="color-hex">#FF6B4A</div>
        </div>
      </div>
    </div>

    <div class="custom-section">
      <h2>Custom Color</h2>
      <div class="custom-input-row">
        <input type="color" id="customPicker" value="#a6ed0c">
        <input type="text" id="customHex" placeholder="#a6ed0c" maxlength="7">
        <button onclick="applyCustom()">Apply</button>
      </div>
    </div>
  </aside>

  <main class="preview-area">
    <!-- Quick comparison strip -->
    <div class="comparison-strip strip-wrapper" id="comparisonStrip"></div>

    <!-- Logo preview -->
    <div class="logo-preview-card">
      <div class="logo-text">hndl</div>
      <div class="logo-badge">
        <span>FLEET<br>MANAGEMENT</span>
      </div>
    </div>

    <!-- Preview grid -->
    <div class="preview-grid">
      <div class="preview-card card-on-navy">
        <h3>On Navy Blue</h3>
        <div class="sample-text">Fleet Efficiency</div>
        <div class="sample-body">Monitor your fleet performance in real-time with intelligent analytics and predictive insights.</div>
      </div>

      <div class="preview-card card-on-white">
        <h3>On Light Background</h3>
        <div class="sample-text">Fleet Efficiency</div>
        <div class="sample-body">Monitor your fleet performance in real-time with intelligent analytics and predictive insights.</div>
      </div>

      <div class="preview-card card-buttons">
        <h3>UI Elements</h3>
        <div class="btn-row">
          <div class="btn-sample btn-filled">Start Tracking</div>
          <div class="btn-sample btn-outline">View Reports</div>
          <div class="btn-sample btn-ghost">Learn More</div>
        </div>
      </div>

      <div class="preview-card card-dashboard">
        <h3>Dashboard Preview</h3>
        <div class="dash-stats">
          <div class="dash-stat">
            <div class="dash-stat-label">Vehicles</div>
            <div class="dash-stat-value">148</div>
          </div>
          <div class="dash-stat">
            <div class="dash-stat-label">Active</div>
            <div class="dash-stat-value">92%</div>
          </div>
        </div>
        <div class="dash-bar-chart">
          <div class="dash-bar" style="height:60%"></div>
          <div class="dash-bar" style="height:80%"></div>
          <div class="dash-bar" style="height:45%"></div>
          <div class="dash-bar" style="height:90%"></div>
          <div class="dash-bar" style="height:70%"></div>
          <div class="dash-bar" style="height:55%"></div>
          <div class="dash-bar" style="height:85%"></div>
          <div class="dash-bar" style="height:40%"></div>
          <div class="dash-bar" style="height:75%"></div>
          <div class="dash-bar" style="height:95%"></div>
        </div>
      </div>
    </div>

    <!-- Contrast ratios -->
    <div class="contrast-section">
      <h3>Accessibility — Contrast Ratios</h3>
      <div class="contrast-grid">
        <div class="contrast-item" id="contrastNavy">
          <div class="contrast-label">vs Navy (#083359)</div>
          <div class="contrast-ratio">—</div>
          <div class="contrast-badge">—</div>
        </div>
        <div class="contrast-item" id="contrastWhite">
          <div class="contrast-label">vs White (#FFFFFF)</div>
          <div class="contrast-ratio">—</div>
          <div class="contrast-badge">—</div>
        </div>
        <div class="contrast-item" id="contrastNeutral">
          <div class="contrast-label">vs Neutral (#F5F5F5)</div>
          <div class="contrast-ratio">—</div>
          <div class="contrast-badge">—</div>
        </div>
      </div>
    </div>
  </main>
</div>

<script>
const allColors = [
  { color: '#a6ed0c', name: 'Go Green' },
  { color: '#50C878', name: 'Emerald' },
  { color: '#3EB489', name: 'Mint' },
  { color: '#00BFA5', name: 'Teal' },
  { color: '#4CAF50', name: 'Material' },
  { color: '#00D4FF', name: 'Cyan' },
  { color: '#40E0D0', name: 'Turquoise' },
  { color: '#FFB800', name: 'Amber' },
  { color: '#FF6B4A', name: 'Coral' },
];

// Build comparison strip
function buildStrip() {
  const strip = document.getElementById('comparisonStrip');
  strip.innerHTML = '';
  allColors.forEach(c => {
    const div = document.createElement('div');
    div.className = 'strip-swatch' + (c.color.toUpperCase() === currentColor.toUpperCase() ? ' active-strip' : '');
    div.style.background = c.color;
    div.title = c.name + ' ' + c.color;
    div.onclick = () => {
      const opt = document.querySelector(`.color-option[data-color="${c.color}"]`);
      if (opt) setColor(opt);
      else {
        currentColor = c.color;
        applyColor(c.color);
      }
    };
    const label = document.createElement('div');
    label.className = 'strip-swatch-label';
    label.textContent = c.name;
    div.appendChild(label);
    strip.appendChild(div);
  });
}

let currentColor = '#a6ed0c';

function setColor(el) {
  document.querySelectorAll('.color-option').forEach(o => o.classList.remove('active'));
  el.classList.add('active');
  const color = el.dataset.color;
  currentColor = color;
  applyColor(color);
}

function applyColor(color) {
  document.documentElement.style.setProperty('--current-accent', color);

  // Update buttons
  document.querySelector('.btn-filled').style.background = color;
  document.querySelector('.btn-filled').style.color = getContrastTextColor(color);
  document.querySelector('.btn-outline').style.borderColor = color;
  document.querySelector('.btn-outline').style.color = color;
  document.querySelector('.btn-ghost').style.background = hexToRgba(color, 0.1);
  document.querySelector('.btn-ghost').style.color = color;

  // Contrast
  updateContrast(color);

  // Strip
  buildStrip();

  // Custom picker sync
  document.getElementById('customPicker').value = color;
  document.getElementById('customHex').value = color;
}

function applyCustom() {
  const picker = document.getElementById('customPicker');
  const hex = document.getElementById('customHex');
  let color = hex.value || picker.value;
  if (!color.startsWith('#')) color = '#' + color;
  if (/^#[0-9a-fA-F]{6}$/.test(color)) {
    document.querySelectorAll('.color-option').forEach(o => o.classList.remove('active'));
    currentColor = color;
    applyColor(color);
  }
}

document.getElementById('customPicker').addEventListener('input', (e) => {
  document.getElementById('customHex').value = e.target.value;
});

document.getElementById('customHex').addEventListener('keydown', (e) => {
  if (e.key === 'Enter') applyCustom();
});

// Contrast ratio calculation
function getLuminance(hex) {
  const rgb = hexToRGB(hex);
  const [r, g, b] = [rgb.r, rgb.g, rgb.b].map(c => {
    c = c / 255;
    return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
  });
  return 0.2126 * r + 0.7152 * g + 0.0722 * b;
}

function getContrastRatio(hex1, hex2) {
  const l1 = getLuminance(hex1);
  const l2 = getLuminance(hex2);
  const lighter = Math.max(l1, l2);
  const darker = Math.min(l1, l2);
  return (lighter + 0.05) / (darker + 0.05);
}

function hexToRGB(hex) {
  const r = parseInt(hex.slice(1, 3), 16);
  const g = parseInt(hex.slice(3, 5), 16);
  const b = parseInt(hex.slice(5, 7), 16);
  return { r, g, b };
}

function hexToRgba(hex, alpha) {
  const { r, g, b } = hexToRGB(hex);
  return `rgba(${r},${g},${b},${alpha})`;
}

function getContrastTextColor(hex) {
  return getLuminance(hex) > 0.4 ? '#083359' : '#ffffff';
}

function updateContrast(color) {
  const pairs = [
    { id: 'contrastNavy', bg: '#083359' },
    { id: 'contrastWhite', bg: '#FFFFFF' },
    { id: 'contrastNeutral', bg: '#F5F5F5' },
  ];
  pairs.forEach(p => {
    const ratio = getContrastRatio(color, p.bg);
    const el = document.getElementById(p.id);
    el.querySelector('.contrast-ratio').textContent = ratio.toFixed(2) + ':1';
    const badge = el.querySelector('.contrast-badge');
    if (ratio >= 4.5) {
      badge.textContent = 'AA ✓';
      badge.className = 'contrast-badge badge-pass';
    } else if (ratio >= 3) {
      badge.textContent = 'AA Large ✓';
      badge.className = 'contrast-badge badge-pass';
    } else {
      badge.textContent = 'FAIL';
      badge.className = 'contrast-badge badge-fail';
    }
  });
}

// Mode toggle
function toggleMode() {
  document.body.classList.toggle('light-mode');
  const isLight = document.body.classList.contains('light-mode');
  document.getElementById('modeIcon').innerHTML = isLight ? '&#9728;' : '&#9790;';
  document.getElementById('modeLabel').textContent = isLight ? 'Light' : 'Dark';
}

// Init
applyColor('#a6ed0c');
</script>
</body>
</html>
